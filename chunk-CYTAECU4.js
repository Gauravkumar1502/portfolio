import{V as i,_ as n,dc as s}from"./chunk-YG43CEAU.js";var l=class o{constructor(){}setItem(e,t){try{let r=JSON.stringify(t);localStorage.setItem(e,r)}catch(r){throw console.error("Error saving to localStorage:",r),new Error("Failed to save data to localStorage")}}getItem(e){try{let t=localStorage.getItem(e);return t===null?null:JSON.parse(t)}catch(t){return console.error("Error reading from localStorage:",t),null}}removeItem(e){try{localStorage.removeItem(e)}catch(t){throw console.error("Error removing from localStorage:",t),new Error("Failed to remove data from localStorage")}}clear(){try{localStorage.clear()}catch(e){throw console.error("Error clearing localStorage:",e),new Error("Failed to clear localStorage")}}hasKey(e){return localStorage.getItem(e)!==null}getAllKeys(){return Object.keys(localStorage)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};var c=class o{constructor(e,t){this.document=e;this.localStorageService=t}static TERMINAL_THEME_KEY="terminal-theme";static GUI_THEME_KEY="gui-theme";themes=new Map([["dark-forest",{themeType:"terminal",isDarkMode:!0}],["dark-day",{themeType:"terminal",isDarkMode:!0}],["dark-ocean",{themeType:"terminal",isDarkMode:!0}],["dark-space",{themeType:"terminal",isDarkMode:!0}],["dark-night",{themeType:"terminal",isDarkMode:!0}],["dark-cave",{themeType:"terminal",isDarkMode:!0}],["dark-sea",{themeType:"terminal",isDarkMode:!0}],["light-vanilla",{themeType:"terminal",isDarkMode:!1}],["light-haze",{themeType:"terminal",isDarkMode:!1}],["light-day",{themeType:"terminal",isDarkMode:!1}],["light-sky",{themeType:"terminal",isDarkMode:!1}],["dark",{themeType:"gui",isDarkMode:!0}],["dark-high-contrast",{themeType:"gui",isDarkMode:!0}],["dark-medium-contrast",{themeType:"gui",isDarkMode:!0}],["light",{themeType:"gui",isDarkMode:!1}],["light-high-contrast",{themeType:"gui",isDarkMode:!1}],["light-medium-contrast",{themeType:"gui",isDarkMode:!1}]]);initTheme(e){console.log("Initializing theme:",e);let t=this.getTheme(e);if(t)this.applyTheme(e,t,null);else{let r=this.getDefaulTheme(e);this.setTheme(e,r)}}getTheme(e){console.log("Getting theme:",e);let t=e==="terminal"?o.TERMINAL_THEME_KEY:o.GUI_THEME_KEY;return this.localStorageService.getItem(t)}isDarkMode(e){console.log("Checking dark mode:",e);let t=this.getTheme(e);if(!t)return this.detectDarkModePreference();let r=this.themes.get(t);return r?r.isDarkMode:!1}setTheme(e,t){console.log("Setting theme:",e,t);let r=e==="terminal"?o.TERMINAL_THEME_KEY:o.GUI_THEME_KEY,a=this.getTheme(e);this.localStorageService.setItem(r,t),this.applyTheme(e,t,a)}removeTheme(e){console.log("Removing theme:",e);let t=e==="terminal"?o.TERMINAL_THEME_KEY:o.GUI_THEME_KEY,{body:r}=this.document,a=this.getTheme(e);a&&r.classList.remove(a)}applyTheme(e,t,r){console.log("Applying theme:",e,t);let{body:a}=this.document;r&&a.classList.remove(r),a.classList.add(t)}detectDarkModePreference(){return console.log("Checking dark mode"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}getDefaulTheme(e){console.log("Getting default theme:",e);let t=this.detectDarkModePreference();return e==="terminal"?t?"dark-forest":"light-vanilla":t?"dark":"light"}static \u0275fac=function(t){return new(t||o)(n(s),n(l))};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
